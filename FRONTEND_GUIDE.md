# 🎨 前端界面使用指南

## 🚀 启动前端

### 方法 1: 使用启动脚本 (推荐)
```powershell
# 在项目根目录执行
.\start-frontend.ps1
```

### 方法 2: 手动启动
```powershell
cd frontend
npm install    # 首次运行需要安装依赖
npm run dev    # 启动开发服务器
```

### 访问地址
- 前端界面: http://localhost:3000
- 后端 API: http://localhost:8000
- API 文档: http://localhost:8000/docs

---

## 📱 界面功能说明

### 1. 仪表板 (Dashboard) 📊

#### 功能概览
- **实时统计**: 显示总任务数、已完成数、威胁数、安全文件数
- **检测率分析**: 
  - 威胁检出率百分比
  - 可视化进度条
  - 安全率 vs 威胁率对比
- **最近活动时间线**: 系统状态和扫描历史
- **最近检测记录表格**: 
  - 文件名 (带图标)
  - 哈希值 (可复制)
  - 威胁级别 (彩色标签)
  - 扫描时间 (带时间图标)
  - 支持按威胁级别筛选
  - 支持按时间排序

#### 视觉特点
- ✨ 4 个彩色统计卡片 (蓝/绿/红/绿)
- 📈 动态进度条显示检测率
- 🎯 威胁级别彩色标签:
  - 🟢 安全 (green)
  - 🟠 可疑 (orange)
  - 🔴 恶意 (red)
  - 🟣 严重 (purple)
- 🔄 每 30 秒自动刷新数据

---

### 2. 文件扫描 (Scan Management) 📂

#### 上传功能
**拖拽上传区域**:
- 📦 支持拖拽文件到上传区
- 🖱️ 或点击选择文件
- 📎 支持批量上传多个文件
- ✅ 支持格式: `.exe`, `.dll`, `.bin`, `.pdf`, `.doc`, `.docx`, `.zip`, `.rar`

#### 实时进度显示
**上传列表**:
- 🔄 上传中: 蓝色旋转图标 + 进度条 (0-100%)
- ✅ 完成: 绿色勾选图标 + 检测结果标签
  - 🟢 "安全" 标签 (绿色)
  - 🔴 "检测到威胁" 标签 (红色)
- ❌ 失败: 红色叉号图标 + 错误信息
- 📊 匹配规则数量显示
- ⏱️ 3 秒后自动移除已完成/失败的项

#### 统计卡片 (顶部 4 个)
1. **总任务数** (蓝色) 📄
2. **已完成** (绿色) ✅
3. **检测到威胁** (红色) ⚠️
4. **安全文件** (绿色) 🛡️

#### 任务列表
**表格字段**:
- 任务 ID (前 8 位)
- 目标路径
- 扫描类型
- 状态标签:
  - ⚪ pending (默认)
  - 🔵 running (处理中)
  - 🟢 completed (成功)
  - 🔴 failed (失败)
- **进度条**: 显示扫描进度百分比
- **文件统计**: 已扫描/总文件 + 威胁数标签
- 创建时间
- **操作按钮**:
  - 👁️ 查看结果
  - 🗑️ 删除任务

#### 结果详情弹窗
- 文件名
- 哈希值 (前 16 位)
- 威胁级别 (彩色标签)
- 匹配规则

---

### 3. 规则管理 (Rule Management) 📜

#### 功能
- 创建/编辑/删除 YARA 规则
- 上传 .yar 规则文件
- 查看规则详情
- 规则状态管理 (启用/禁用)
- 规则分类和标签

#### 表格字段
- ID
- 规则名称
- 严重级别
- 状态
- 分类
- 标签
- 匹配次数
- 误报次数
- 创建时间
- 操作 (编辑/删除)

---

## 🎨 界面美化特点

### 视觉设计
1. **卡片化布局**: 所有模块使用 Ant Design Card 组件
2. **图标系统**: 丰富的图标增强可读性
3. **颜色语义化**:
   - 🔵 蓝色: 信息、统计
   - 🟢 绿色: 成功、安全
   - 🔴 红色: 危险、威胁
   - 🟠 橙色: 警告、可疑
   - 🟣 紫色: 严重威胁
4. **响应式设计**: 支持桌面和移动端

### 交互体验
1. **实时更新**: 
   - 扫描任务每 5 秒刷新
   - 仪表板每 30 秒刷新
2. **动画效果**:
   - 进度条动画
   - 加载动画
   - 旋转图标
3. **消息提示**:
   - 成功: ✅ 绿色提示
   - 失败: ❌ 红色提示
   - 加载: 🔄 蓝色提示

### 数据可视化
1. **进度条**:
   - 扫描进度 (任务列表)
   - 检测率 (仪表板)
   - 上传进度 (文件上传)
2. **标签系统**:
   - 状态标签 (pending/running/completed/failed)
   - 威胁级别标签 (clean/suspicious/malicious/critical)
   - 检测结果标签 (安全/检测到威胁)
3. **时间线**: 显示系统活动历史

---

## 📊 数据统计展示

### 仪表板统计
```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  总任务数   │   已完成    │  检测到威胁 │  安全文件   │
│   (蓝色)    │   (绿色)    │   (红色)    │   (绿色)    │
│  📄 100个   │  ✅ 80个   │  ⚠️ 20个   │  🛡️ 60个  │
└─────────────┴─────────────┴─────────────┴─────────────┘

检测率分析:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
威胁检出率: ████████████░░░░░░░░░░░░░░░░░░ 25%
安全率: 75%  |  威胁率: 25%
```

### 文件扫描统计
```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  总任务数   │   已完成    │  检测到威胁 │  安全文件   │
└─────────────┴─────────────┴─────────────┴─────────────┘

上传进度:
┌─────────────────────────────────────────────────┐
│ 🔄 malware.exe                                  │
│ ████████████████████░░░░░░░░░░░░░░░░░░░░ 60%  │
│ 扫描中...                                       │
└─────────────────────────────────────────────────┘
│ ✅ sample.pdf                         安全      │
│ ████████████████████████████████████████ 100%  │
│ 匹配规则: 0 个                                  │
└─────────────────────────────────────────────────┘
```

---

## 🎯 使用场景

### 场景 1: 批量文件扫描
1. 打开 "文件扫描" 页面
2. 拖拽多个文件到上传区
3. 实时查看每个文件的扫描进度
4. 查看扫描结果 (安全/威胁)
5. 点击 "查看结果" 查看详情

### 场景 2: 查看系统状态
1. 打开 "仪表板" 页面
2. 查看总体统计数据
3. 分析检测率图表
4. 查看最近活动时间线
5. 浏览最近检测记录

### 场景 3: 管理 YARA 规则
1. 打开 "规则管理" 页面
2. 创建新规则或上传 .yar 文件
3. 编辑/启用/禁用规则
4. 查看规则匹配统计

---

## 🔧 高级功能

### 1. 筛选和排序
- **仪表板**:
  - 按威胁级别筛选记录
  - 按时间排序
- **任务列表**:
  - 分页显示 (每页 10 条)
  - 按状态筛选

### 2. 复制功能
- 点击哈希值可复制完整 SHA256

### 3. 自动刷新
- 仪表板: 每 30 秒
- 任务列表: 每 5 秒
- 确保数据实时性

---

## 📝 注意事项

### 性能优化
- ✅ 大文件上传: 自动显示进度
- ✅ 批量扫描: 并行处理多个文件
- ✅ 自动清理: 3 秒后移除完成的上传项

### 用户体验
- 🎨 彩色标签: 快速识别状态
- 📊 进度条: 实时反馈
- 💬 提示消息: 友好的操作反馈
- 🔄 自动刷新: 无需手动刷新页面

### 安全建议
- ⚠️ 仅在隔离环境中测试恶意样本
- 🔒 定期更新 YARA 规则库
- 📋 及时处理检测到的威胁文件

---

## 🐛 常见问题

### Q1: 前端无法连接后端
**解决方案**:
```powershell
# 确保后端已启动
cd backend
python main.py
```

### Q2: 上传文件无响应
**检查**:
- 后端服务是否运行
- 文件格式是否支持
- 文件大小是否超限

### Q3: 数据不刷新
**操作**:
- 手动刷新浏览器 (F5)
- 检查浏览器控制台错误
- 重启前端服务

---

## 🎉 快速开始示例

### 完整流程
```powershell
# 1. 启动后端 (新终端)
cd backend
pip install -r requirements.txt
python init_db.py
python create_sample_rules.py
python main.py

# 2. 启动前端 (新终端)
cd frontend
npm install
npm run dev

# 3. 访问界面
# 打开浏览器: http://localhost:3000

# 4. 测试扫描
# - 点击 "文件扫描"
# - 拖拽文件到上传区
# - 观察实时进度
# - 查看扫描结果
```

---

## 📸 界面截图说明

### 仪表板
- 顶部: 4 个统计卡片
- 中间: 检测率分析 + 最近活动时间线
- 底部: 最近检测记录表格

### 文件扫描
- 顶部: 4 个统计卡片
- 中间: 拖拽上传区 + 实时进度列表
- 底部: 任务列表表格

### 规则管理
- 顶部: 操作按钮 (新建/上传)
- 中间: 规则列表表格
- 弹窗: 创建/编辑表单

---

## 🚀 下一步

### 推荐操作
1. ✅ 导入 YARA 规则 (使用 tools/yara_loader.py)
2. ✅ 准备测试样本
3. ✅ 执行扫描测试
4. ✅ 查看检测报告
5. ✅ 优化规则库

### 开发建议
- 根据需求自定义界面
- 添加更多图表和可视化
- 集成更多检测引擎
- 实现高级筛选和搜索

---

**祝使用愉快！** 🎊

如有问题，请查看项目文档或联系开发团队。
